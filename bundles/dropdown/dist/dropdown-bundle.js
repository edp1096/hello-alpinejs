var dropdownComponent=(()=>{var S=Object.defineProperty;var _=Object.getOwnPropertyDescriptor;var v=Object.getOwnPropertyNames;var C=Object.prototype.hasOwnProperty;var E=(f,a)=>{for(var s in a)S(f,s,{get:a[s],enumerable:!0})},x=(f,a,s,w)=>{if(a&&typeof a=="object"||typeof a=="function")for(let e of v(a))!C.call(f,e)&&e!==s&&S(f,e,{get:()=>a[e],enumerable:!(w=_(a,e))||w.enumerable});return f};var N=f=>x(S({},"__esModule",{value:!0}),f);var J={};E(J,{registerDropdown:()=>O});var h=`<div x-data="dropdown" class="alpine-dropdown-component"><div @click.outside="isOpen = false"><button class="dropdown__button" @click.stop="toggle"><i :class="displayIcon" class="dropdown__icon"></i><span class="dropdown__name" x-text="displayName"></span><div class="dropdown__icons"><i class="ri-arrow-down-s-line dropdown__arrow" :class="{'hidden': isOpen}"></i><i class="ri-close-line dropdown__close" :class="{'hidden': !isOpen}"></i></div></button><ul class="dropdown__menu" :class="{'show-dropdown': isOpen}"><template x-for="(option, index) in options" :key="index"><li class="dropdown__item" :class="{'dropdown__item--disabled': option.disabled}" @click="!option.disabled && selectOption(option)"><i :class="option.icon" class="dropdown__icon"></i><span class="dropdown__name" x-text="option.name"></span></li></template></ul></div></div>`;var D=[];function O(f={}){if(!window.Alpine)return console.error("Alpine.js is not loaded. Please load Alpine.js first."),null;if(typeof customElements<"u"&&!customElements.get("my-dropdown")){class s extends HTMLElement{connectedCallback(){let e=[],d=this.getAttribute("selected"),o=null,n=this.querySelectorAll("option");n.length>0&&(e=Array.from(n).map(r=>{let m=r.textContent,g=r.getAttribute("value")||m,b=r.getAttribute("icon")||"ri-file-list-line",A={name:m,value:g,icon:b};return Array.from(r.attributes).forEach(y=>{["value","icon"].includes(y.name)||(A[y.name]=y.value)}),d&&(d===g||d===m)&&(o=A),A}),!o&&e.length>0&&(o=e[0]),n.forEach(r=>r.remove())),this.innerHTML=h;let t=this.getAttribute("options"),c=this.getAttribute("selected"),i=this.getAttribute("position"),p=this.getAttribute("on-select"),u=this.getAttribute("config"),l={options:e.length>0?e:[...D],defaultOption:o||null};if(u)try{let r=JSON.parse(u);Object.assign(l,r)}catch(r){console.error("Invalid config attribute:",r)}if(t)try{l.options=JSON.parse(t)}catch(r){console.error("Invalid options attribute:",r)}if(c&&e.length===0)try{l.defaultOption=JSON.parse(c)}catch{let m=l.options.find(g=>g.name===c||g.value===c);m&&(l.defaultOption=m)}if(i&&(l.position=i),p)try{typeof window[p]=="function"?l.onSelect=window[p]:console.warn(`\uD568\uC218 '${p}'\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`)}catch(r){console.error("Error setting onSelect callback:",r)}if(!l.defaultOption&&l.options&&l.options.length>0&&(l.defaultOption=l.options[0]),this.setAttribute("x-data","dropdown"),this.id)window.Alpine.store("dropdownConfig_"+this.id,l);else{let r="dropdown_"+Math.random().toString(36).substring(2,11);this.id=r,window.Alpine.store("dropdownConfig_"+r,l)}}disconnectedCallback(){if(this.id&&window.Alpine&&window.Alpine.store)try{let e="dropdownConfig_"+this.id;typeof window.Alpine.store(e)<"u"&&window.Alpine.store(e,{})}catch(e){console.warn("Error cleaning up dropdown:",e)}}addOption(e){if(!e||!e.name)return!1;let d="dropdownConfig_"+this.id,o=window.Alpine.store(d);if(o){if(o.options.some(i=>i.value&&i.value===e.value||i.name&&i.name===e.name))return console.warn("\uC911\uBCF5\uB41C \uC635\uC158:",e),!1;let t=document.createElement("my-dropdown");t.id=this.id;let c=[...o.options,e];return t.setAttribute("config",JSON.stringify({options:c,defaultOption:o.defaultOption})),o.onSelect&&setTimeout(()=>{window.Alpine.store("dropdownConfig_"+t.id,{...JSON.parse(t.getAttribute("config")),onSelect:o.onSelect})},0),this.replaceWith(t),!0}return!1}removeOption(e){let d="dropdownConfig_"+this.id,o=window.Alpine.store(d);if(o){let n=[...o.options],t=[],c=!1;if(typeof e=="number"?e>=0&&e<n.length&&(t=[...n.slice(0,e),...n.slice(e+1)],c=!0):(t=n.filter(i=>i.value!==e&&i.name!==e),c=t.length<n.length),c){let i=document.createElement("my-dropdown");i.id=this.id;let p=o.defaultOption;return o.defaultOption&&!t.some(l=>l.value===o.defaultOption.value||l.name===o.defaultOption.name)&&t.length>0?p=t[0]:t.length===0&&(p=null),i.setAttribute("config",JSON.stringify({options:t,defaultOption:p})),o.onSelect&&setTimeout(()=>{window.Alpine.store("dropdownConfig_"+i.id,{...JSON.parse(i.getAttribute("config")),onSelect:o.onSelect})},0),this.replaceWith(i),!0}}return!1}updateOption(e,d){if(!d||typeof d!="object")return!1;let o="dropdownConfig_"+this.id,n=window.Alpine.store(o);if(n){let t=[...n.options],c=!1,i=-1;if(typeof e=="number"?e>=0&&e<t.length&&(i=e,c=!0):(i=t.findIndex(p=>p.value===e||p.name===e),c=i!==-1),c){let p=t[i];t[i]={...p,...d};let u=document.createElement("my-dropdown");u.id=this.id;let l=n.defaultOption;return n.defaultOption&&(n.defaultOption.value===p.value||n.defaultOption.name===p.name)&&(l=t[i]),u.setAttribute("config",JSON.stringify({options:t,defaultOption:l})),n.onSelect&&setTimeout(()=>{window.Alpine.store("dropdownConfig_"+u.id,{...JSON.parse(u.getAttribute("config")),onSelect:n.onSelect})},0),this.replaceWith(u),!0}}return!1}updateOptions(e){if(!Array.isArray(e))return!1;let d="dropdownConfig_"+this.id,o=window.Alpine.store(d);if(o){let n=document.createElement("my-dropdown");n.id=this.id;let t=o.defaultOption;return!(o.defaultOption&&e.some(i=>i.value&&i.value===o.defaultOption.value||i.name&&i.name===o.defaultOption.name))&&e.length>0?t=e[0]:e.length===0&&(t=null),n.setAttribute("config",JSON.stringify({options:e,defaultOption:t})),o.onSelect&&setTimeout(()=>{window.Alpine.store("dropdownConfig_"+n.id,{...JSON.parse(n.getAttribute("config")),onSelect:o.onSelect})},0),this.replaceWith(n),!0}return!1}getOptions(){let e="dropdownConfig_"+this.id,d=window.Alpine.store(e);return d&&d.options?[...d.options]:[]}setSelectedOption(e){let d="dropdownConfig_"+this.id,o=window.Alpine.store(d);if(!o)return!1;let n=null;if(typeof e=="string"?n=o.options.find(t=>t.value===e||t.name===e):e&&typeof e=="object"&&(n=e),n){let t=document.createElement("my-dropdown");return t.id=this.id,t.setAttribute("config",JSON.stringify({options:o.options,defaultOption:n})),o.onSelect&&setTimeout(()=>{window.Alpine.store("dropdownConfig_"+t.id,{...JSON.parse(t.getAttribute("config")),onSelect:o.onSelect})},0),this.replaceWith(t),!0}return!1}}customElements.define("my-dropdown",s)}return window.Alpine.data("dropdown",()=>({init(){let s=this.$el.closest("my-dropdown");if(s&&s.id){let w=window.Alpine.store("dropdownConfig_"+s.id);w&&(this.options=w.options||[],this.selectedOption=w.defaultOption||null,this.onSelect=w.onSelect)}},isOpen:!1,options:[],selectedOption:null,onSelect:null,get displayName(){return this.selectedOption?this.selectedOption.name:"Select option"},get displayIcon(){return this.selectedOption?this.selectedOption.icon:"ri-user-3-line"},toggle(){this.isOpen=!this.isOpen},selectOption(s){this.selectedOption=s,this.isOpen=!1,typeof this.onSelect=="function"&&this.onSelect(s),this.$el.dispatchEvent(new CustomEvent("option-selected",{detail:{option:s},bubbles:!0}))}})),{mount(s){typeof s=="string"&&(s=document.querySelector(s)),s?s.innerHTML=h:console.error("Cannot find target element.",s)},getTemplate(){return h}}}typeof document<"u"&&document.addEventListener("DOMContentLoaded",()=>{window.Alpine&&(O(),document.querySelectorAll("[data-dropdown-mount]").forEach(f=>{let a=O();a&&a.mount(f)}),typeof customElements<"u"&&customElements.whenDefined("my-dropdown").then(()=>{console.log("my-dropdown custom element defined")}))});window.DropdownComponent={registerDropdown:O};return N(J);})();
