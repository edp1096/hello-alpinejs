var regionSelectorComponent=(()=>{var g=Object.defineProperty;var f=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var y=Object.prototype.hasOwnProperty;var m=(s,l)=>{for(var e in l)g(s,e,{get:l[e],enumerable:!0})},C=(s,l,e,t)=>{if(l&&typeof l=="object"||typeof l=="function")for(let i of p(l))!y.call(s,i)&&i!==e&&g(s,i,{get:()=>l[i],enumerable:!(t=f(l,i))||t.enumerable});return s};var w=s=>C(g({},"__esModule",{value:!0}),s);var x={};m(x,{registerRegionSelector:()=>u});var a=`<div x-data="regionSelector" class="region-selector"><button @click="toggleDropdown()" class="region-selector__button" :class="{ 'is-active': isOpen }"><span x-text="displayText"></span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="region-selector__arrow" :class="{ 'rotate': isOpen }"><polyline points="6 9 12 15 18 9"></polyline></svg></button><div x-show="isOpen" @click.outside="closeDropdown()" x-transition:enter="transition ease-out duration-200" x-transition:enter-start="opacity-0 transform scale-95" x-transition:enter-end="opacity-100 transform scale-100" class="region-selector__dropdown"><div @click="selectAllRegions()" class="region-selector__header region-selector__all-regions">\uC804\uCCB4 \uC9C0\uC5ED</div><div class="region-selector__content"><div class="region-selector__cities"><template x-for="city in cities" :key="city.id"><div @click="selectCity(city)" class="region-selector__item" :class="{ 'is-selected': selectedCity && selectedCity.id == city.id }"><span x-text="city.name"></span><span class="region-selector__count" x-text="\`(\${city.count})\`"></span><svg class="region-selector__chevron" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg></div></template></div><div class="region-selector__districts"><template x-if="selectedCity"><div><div @click="selectDistrict({id: 'all', name: selectedCity.name + ' \uC804\uCCB4', count: selectedCity.count})" class="region-selector__item" :class="{ 'is-selected': selectedDistrict && selectedDistrict.id == 'all' }"><span x-text="selectedCity.name + ' \uC804\uCCB4'"></span><span class="region-selector__count" x-text="\`(\${selectedCity.count})\`"></span></div><template x-for="district in filteredDistricts" :key="district.id"><div @click="selectDistrict(district)" class="region-selector__item" :class="{ 'is-selected': selectedDistrict && selectedDistrict.id == district.id }"><span x-text="district.name"></span><span class="region-selector__count" x-text="\`(\${district.count})\`"></span></div></template></div></template></div></div></div></div>`;var h;function u(s={}){if(!window.Alpine)return console.error("Alpine.js is not loaded. Please load Alpine.js first."),null;h=class extends HTMLElement{connectedCallback(){let e={...s},t=this.getAttribute("cities"),i=this.getAttribute("districts"),r=this.getAttribute("selector-id"),d=this.getAttribute("placeholder-text");if(t)try{e.cities=JSON.parse(t)}catch(o){console.error("Failed to parse cities attribute:",o)}if(i)try{e.districts=JSON.parse(i)}catch(o){console.error("Failed to parse districts attribute:",o)}r?e.selectorId=r:this.id&&(e.selectorId=this.id),d&&(e.placeholderText=d),this.innerHTML=a,this.id&&window.Alpine.store("regionSelectorConfig_"+this.id,e),this.addEventListener("region-selected",o=>{typeof this.onRegionSelected=="function"&&this.onRegionSelected(o.detail)})}disconnectedCallback(){this.id&&window.Alpine.store("regionSelectorConfig_"+this.id,null)}getSelectedRegion(){let e=this.__x;return e?{city:e.$data.selectedCity,district:e.$data.selectedDistrict}:{city:null,district:null}}setSelectedRegion(e,t){let i=this.__x;i&&(i.$data.selectedCity=e,i.$data.selectedDistrict=t)}};let l=()=>typeof customElements<"u"&&!customElements.get("region-selector")?(customElements.define("region-selector",h),!0):!1;return l(),window.Alpine.data("regionSelector",()=>({config:s,isOpen:!1,selectedCity:null,selectedDistrict:null,defaultPlaceHolderText:"\uC9C0\uC5ED \uC120\uD0DD",get cities(){if(this.$el&&this.$el.closest("region-selector")&&this.$el.closest("region-selector").id){let e=window.Alpine.store("regionSelectorConfig_"+this.$el.closest("region-selector").id);if(e&&e.cities)return e.cities}return this.config.cities||[]},get districts(){if(this.$el&&this.$el.closest("region-selector")&&this.$el.closest("region-selector").id){let e=window.Alpine.store("regionSelectorConfig_"+this.$el.closest("region-selector").id);if(e&&e.districts)return e.districts}return this.config.districts||[]},get selectorId(){if(this.$el&&this.$el.closest("region-selector")&&this.$el.closest("region-selector").id){let e=window.Alpine.store("regionSelectorConfig_"+this.$el.closest("region-selector").id);return e&&e.selectorId?e.selectorId:this.$el.closest("region-selector").id}return this.config.selectorId||""},get placeholderText(){if(this.$el&&this.$el.closest("region-selector")&&this.$el.closest("region-selector").id){let t=window.Alpine.store("regionSelectorConfig_"+this.$el.closest("region-selector").id);if(t&&t.placeholderText)return t.placeholderText}let e=window.Alpine.store("regionSelectorConfig_"+this.$el.closest("region-selector").id);return this.defaultPlaceHolderText},get displayText(){return this.selectedCity&&this.selectedDistrict?`${this.selectedCity.name} > ${this.selectedDistrict.name.replace(this.selectedCity.name+" ","")}`:this.placeholderText},get filteredDistricts(){return this.selectedCity?this.districts.filter(e=>e.cityId==this.selectedCity.id):[]},toggleDropdown(){this.isOpen=!this.isOpen},closeDropdown(){this.isOpen=!1},selectCity(e){this.selectedCity=e,this.selectedDistrict=null;let t=new CustomEvent("region-selected",{detail:{city:this.selectedCity,district:null,selectorId:this.selectorId},bubbles:!0});this.$el.dispatchEvent(t),typeof this.config.onSelect=="function"&&this.config.onSelect({city:this.selectedCity,district:null,selectorId:this.selectorId})},selectDistrict(e){this.selectedDistrict=e,this.closeDropdown();let t=new CustomEvent("region-selected",{detail:{city:this.selectedCity,district:e,selectorId:this.selectorId},bubbles:!0});this.$el.dispatchEvent(t),typeof this.config.onSelect=="function"&&this.config.onSelect({city:this.selectedCity,district:e,selectorId:this.selectorId})},selectAllRegions(){this.selectedCity=null,this.selectedDistrict=null,this.closeDropdown();let e=new CustomEvent("region-selected",{detail:{city:null,district:null,selectorId:this.selectorId},bubbles:!0});this.$el.dispatchEvent(e),typeof this.config.onSelect=="function"&&this.config.onSelect({city:null,district:null,selectorId:this.selectorId})},init(){this.config&&(this.config.selectedCity&&(this.selectedCity=this.config.selectedCity),this.config.selectedDistrict&&(this.selectedDistrict=this.config.selectedDistrict)),this.$el&&this.$el.closest("region-selector")&&(this.$el.closest("region-selector").__x=this.$data)}})),{mount(e){typeof e=="string"&&(e=document.querySelector(e)),e?e.innerHTML=a:console.error("Cannot find target element.",e)},getTemplate(){return a},setRegionByName(e,t){let i=document.querySelectorAll("region-selector");if(!i.length)return!1;let r=s.cities||[],d=s.districts||[],o=r.find(c=>c.name===e);if(!o)return!1;if(t){let c=d.find(n=>n.cityId===o.id&&(n.name===t||n.name.includes(t)));if(!c&&t==="\uC804\uCCB4"&&(c={id:"all",name:o.name+" \uC804\uCCB4",count:o.count}),!c)return!1;i.forEach(n=>{n.setSelectedRegion(o,c)})}else i.forEach(c=>{c.setSelectedRegion(o,null)});return!0},registerCustomElement:l}}window.RegionSelectorComponent={registerRegionSelector:u};return w(x);})();
