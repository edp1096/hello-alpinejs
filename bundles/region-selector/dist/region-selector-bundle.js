var regionSelectorComponent=(()=>{var n=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var f=Object.prototype.hasOwnProperty;var p=(o,i)=>{for(var e in i)n(o,e,{get:i[e],enumerable:!0})},y=(o,i,e,t)=>{if(i&&typeof i=="object"||typeof i=="function")for(let s of u(i))!f.call(o,s)&&s!==e&&n(o,s,{get:()=>i[s],enumerable:!(t=h(i,s))||t.enumerable});return o};var w=o=>y(n({},"__esModule",{value:!0}),o);var m={};p(m,{registerRegionSelector:()=>g});var c=`<div x-data="regionSelector" class="region-selector"><button @click="toggleDropdown()" class="region-selector__button" :class="{ 'is-active': isOpen }"><span x-text="displayText"></span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="region-selector__arrow" :class="{ 'rotate': isOpen }"><polyline points="6 9 12 15 18 9"></polyline></svg></button><div x-show="isOpen" @click.outside="closeDropdown()" x-transition:enter="transition ease-out duration-200" x-transition:enter-start="opacity-0 transform scale-95" x-transition:enter-end="opacity-100 transform scale-100" class="region-selector__dropdown"><div @click="selectAllRegions()" class="region-selector__header region-selector__all-regions">\uC804\uCCB4 \uC9C0\uC5ED</div><div class="region-selector__content"><div class="region-selector__cities"><template x-for="city in cities" :key="city.id"><div @click="selectCity(city)" class="region-selector__item" :class="{ 'is-selected': selectedCity && selectedCity.id === city.id }"><span x-text="city.name"></span><span class="region-selector__count" x-text="\`(\${city.count})\`"></span><svg class="region-selector__chevron" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg></div></template></div><div class="region-selector__districts"><template x-if="selectedCity"><div><div @click="selectDistrict({id: 'all', name: selectedCity.name + ' \uC804\uCCB4', count: selectedCity.count})" class="region-selector__item" :class="{ 'is-selected': selectedDistrict && selectedDistrict.id === 'all' }"><span x-text="selectedCity.name + ' \uC804\uCCB4'"></span><span class="region-selector__count" x-text="\`(\${selectedCity.count})\`"></span></div><template x-for="district in filteredDistricts" :key="district.id"><div @click="selectDistrict(district)" class="region-selector__item" :class="{ 'is-selected': selectedDistrict && selectedDistrict.id === district.id }"><span x-text="district.name"></span><span class="region-selector__count" x-text="\`(\${district.count})\`"></span></div></template></div></template></div></div></div></div>`;var r;function g(o={}){if(!window.Alpine)return console.error("Alpine.js is not loaded. Please load Alpine.js first."),null;r=class extends HTMLElement{connectedCallback(){let e={...o},t=this.getAttribute("cities"),s=this.getAttribute("districts"),d=this.getAttribute("selector-id"),a=this.getAttribute("placeholder-text");if(t)try{e.cities=JSON.parse(t)}catch(l){console.error("Failed to parse cities attribute:",l)}if(s)try{e.districts=JSON.parse(s)}catch(l){console.error("Failed to parse districts attribute:",l)}d?e.selectorId=d:this.id&&(e.selectorId=this.id),a&&(e.placeholderText=a),this.innerHTML=c,this.id&&window.Alpine.store("regionSelectorConfig_"+this.id,e),this.addEventListener("region-selected",l=>{typeof this.onRegionSelected=="function"&&this.onRegionSelected(l.detail)})}disconnectedCallback(){this.id&&window.Alpine.store("regionSelectorConfig_"+this.id,null)}getSelectedRegion(){let e=this.__x;return e?{city:e.$data.selectedCity,district:e.$data.selectedDistrict}:{city:null,district:null}}setSelectedRegion(e,t){let s=this.__x;s&&(s.$data.selectedCity=e,s.$data.selectedDistrict=t)}};let i=()=>typeof customElements<"u"&&!customElements.get("region-selector")?(customElements.define("region-selector",r),!0):!1;return i(),window.Alpine.data("regionSelector",()=>({config:o,isOpen:!1,selectedCity:null,selectedDistrict:null,defaultPlaceHolderText:"\uC9C0\uC5ED \uC120\uD0DD",get cities(){if(this.$el&&this.$el.closest("region-selector")&&this.$el.closest("region-selector").id){let e=window.Alpine.store("regionSelectorConfig_"+this.$el.closest("region-selector").id);if(e&&e.cities)return e.cities}return window.regionSelectorGlobalData&&window.regionSelectorGlobalData.cities?window.regionSelectorGlobalData.cities:this.config.cities||[]},get districts(){if(this.$el&&this.$el.closest("region-selector")&&this.$el.closest("region-selector").id){let e=window.Alpine.store("regionSelectorConfig_"+this.$el.closest("region-selector").id);if(e&&e.districts)return e.districts}return window.regionSelectorGlobalData&&window.regionSelectorGlobalData.districts?window.regionSelectorGlobalData.districts:this.config.districts||[]},get selectorId(){if(this.$el&&this.$el.closest("region-selector")&&this.$el.closest("region-selector").id){let e=window.Alpine.store("regionSelectorConfig_"+this.$el.closest("region-selector").id);return e&&e.selectorId?e.selectorId:this.$el.closest("region-selector").id}return this.config.selectorId||""},get placeholderText(){if(this.$el&&this.$el.closest("region-selector")&&this.$el.closest("region-selector").id){let t=window.Alpine.store("regionSelectorConfig_"+this.$el.closest("region-selector").id);if(t&&t.placeholderText)return t.placeholderText}let e=window.Alpine.store("regionSelectorConfig_"+this.$el.closest("region-selector").id);return this.defaultPlaceHolderText},get displayText(){return this.selectedCity&&this.selectedDistrict?`${this.selectedCity.name} > ${this.selectedDistrict.name.replace(this.selectedCity.name+" ","")}`:this.placeholderText},get filteredDistricts(){return this.selectedCity?this.districts.filter(e=>e.cityId===this.selectedCity.id):[]},toggleDropdown(){this.isOpen=!this.isOpen},closeDropdown(){this.isOpen=!1},selectCity(e){this.selectedCity=e,this.selectedDistrict=null;let t=new CustomEvent("region-selected",{detail:{city:this.selectedCity,district:null,selectorId:this.selectorId},bubbles:!0});this.$el.dispatchEvent(t),typeof this.config.onSelect=="function"&&this.config.onSelect({city:this.selectedCity,district:null,selectorId:this.selectorId})},selectDistrict(e){this.selectedDistrict=e,this.closeDropdown();let t=new CustomEvent("region-selected",{detail:{city:this.selectedCity,district:e,selectorId:this.selectorId},bubbles:!0});this.$el.dispatchEvent(t),typeof this.config.onSelect=="function"&&this.config.onSelect({city:this.selectedCity,district:e,selectorId:this.selectorId})},selectAllRegions(){this.selectedCity=null,this.selectedDistrict=null,this.closeDropdown();let e=new CustomEvent("region-selected",{detail:{city:null,district:null,selectorId:this.selectorId},bubbles:!0});this.$el.dispatchEvent(e),typeof this.config.onSelect=="function"&&this.config.onSelect({city:null,district:null,selectorId:this.selectorId})},init(){this.config&&(this.config.selectedCity&&(this.selectedCity=this.config.selectedCity),this.config.selectedDistrict&&(this.selectedDistrict=this.config.selectedDistrict)),this.$el&&this.$el.closest("region-selector")&&(this.$el.closest("region-selector").__x=this.$data)}})),{mount(e){typeof e=="string"&&(e=document.querySelector(e)),e?e.innerHTML=c:console.error("Cannot find target element.",e)},getTemplate(){return c},registerCustomElement:i}}window.RegionSelectorComponent={registerRegionSelector:g,defineCustomElement:()=>!customElements.get("region-selector")&&r?(customElements.define("region-selector",r),!0):!1};return w(m);})();
