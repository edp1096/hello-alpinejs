var CalendarComponent=(()=>{var c=Object.defineProperty;var x=Object.getOwnPropertyDescriptor;var E=Object.getOwnPropertyNames;var v=Object.prototype.hasOwnProperty;var k=(e,t)=>{for(var a in t)c(e,a,{get:t[a],enumerable:!0})},A=(e,t,a,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of E(t))!v.call(e,n)&&n!==a&&c(e,n,{get:()=>t[n],enumerable:!(s=x(t,n))||s.enumerable});return e};var T=e=>A(c({},"__esModule",{value:!0}),e);var H={};k(H,{registerCalendar:()=>D});var h=`<div x-data="calendar_module" class="alpine-calendar-component"><button @click="changeAvailableDates">Change availableDates</button><br><label for="selection-mode">Selection mode:</label><select x-model="selectMode" id="selection-mode"><option value="single" selected>Single</option><option value="multiple">Multiple</option></select><template x-if="!selectedEntry && selectedDates.length == 0"><p>Please select date.</p></template><template x-if="selectedEntry"><p> Selected date: <strong><span x-text="selectedDate"></span></strong><template x-if="selectedEntry?.isToday"><span>(Today!)</span></template><button @click="selectEntry(null)">Clear</button></p></template><template x-if="selectedDates.length > 0"><p> Selected dates: <strong><span x-text="selectedDates[0]"></span> ~ <span x-text="selectedDates[1]"></span></strong><button @click="selectEntry(null)">Clear</button></p></template><p class="alpine-calendar-component__jumper"><strong>Jump to:</strong><button @click="resetCalendar">Today</button><template x-for="(_, index) in Array(4).fill(null)" :key="index"><button @click="jumpToYearCurrentMonth(getToday().year+index)" x-text="getToday().year+index"></button></template></p><table x-data="calendar_entry" class="alpine-calendar-component__calendar" x-ref="calendarEntry"><thead><tr><th colspan="7"><div class="alpine-calendar-component__tools"><button @click="gotoPrevMonth()">&larr;</button><span x-text="monthName"></span><span x-text="year"></span><button @click="gotoNextMonth()">&rarr;</button></div></th></tr><tr><template x-for="header in grid.headersAbbreviated" :key="header"><th scope="col" x-text="header"></th></template></tr></thead><tbody><template x-for="(week, i) in grid.weeks" :key="i"><tr><template x-for="entry in week" :key="entry.id"><td><button @click="selectEntry(entry)" :class="{ 'current': entry.isCurrentMonth, 'other': entry.isOtherMonth, 'today': entry.isToday, 'weekday': entry.isWeekday, 'saturday': entry.isSaturday, 'sunday': entry.isSunday, 'selected': isSelected(entry) }" :disabled="!getAvailable(entry)" x-text="entry.date"></button></td></template></tr></template></tbody></table></div>`;var M=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],C=["Sun","Mon","Tue","Wed","Thr","Fri","Sat"],y=["January","February","March","April","May","June","July","August","September","October","November","December"],Y=!0,p=!1;function f(e,t){let a=O(e,t),s=[];for(let n=1;n<=a;n++)s.push(g(e,t,n,Y));return s}function g(e,t,a,s){let n=new Date(e,t,a);return{id:n.getTime(),year:n.getFullYear(),month:n.getMonth(),monthName:y[n.getMonth()],date:n.getDate(),day:n.getDay(),dayName:M[n.getDay()],isToday:F(n),isCurrentMonth:s,isOtherMonth:!s,isWeekday:$(n.getDay()),isSaturday:R(n.getDay()),isSunday:I(n.getDay())}}function b(e){let t={headers:M.slice(),headersAbbreviated:C.slice(),entries:e.slice(),weeks:[]};for(;;){let a=t.entries.at(0);if(_(a))break;t.entries.unshift(g(a.year,a.month,a.date-1,p))}for(;;){let a=t.entries.at(-1);if(N(a))break;t.entries.push(g(a.year,a.month,a.date+1,p))}for(let a=0;a<t.entries.length;a+=7)t.weeks.push(t.entries.slice(a,a+7));return t}function O(e,t){return new Date(e,t+1,0).getDate()}function _(e){return e.day===0}function N(e){return e.day===6}function F(e){let t=new Date;return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}function $(e){return!j(e)}function j(e){return e===0||e===6}function R(e){return e===6}function I(e){return e===0}function m(e,t,a){return t=(t+1).toString().padStart(2,"0"),a=a.toString().padStart(2,"0"),`${e}-${t}-${a}`}function u(e){return m(e.year,e.month,e.date)}var W=(e,t)=>{let a=new Date,s=e??a.getFullYear(),n=t??a.getMonth(),l=y[n],o=f(s,n),d=b(o);return{year:s,month:n,monthName:l,entries:o,grid:d,gotoDate(r){this.year=r.getFullYear(),this.month=r.getMonth(),this.monthName=y[this.month],this.entries=f(this.year,this.month),this.grid=b(this.entries)},gotoNextMonth(){this.gotoDate(new Date(this.year,this.month+1,1))},gotoToday(){this.gotoDate(new Date)},gotoPrevMonth(){this.gotoDate(new Date(this.year,this.month-1,1))},gotoYear(r,i){this.gotoDate(new Date(r,i||0,1))}}},L=()=>({selectMode:"single",selectedEntry:null,selectedDate:null,selectedDates:[],availables:[],init(){this.$watch("selectMode",()=>{this.clearSelection()}),this.setAvailables(this.createRandomAvailableDates())},createRandomAvailableDates(){let e=new Date,t=e.getFullYear(),a=e.getMonth(),s=new Date(t,a,1),n=new Date(t,a+2,0),l=[];for(let r=new Date(s);r<=n;r.setDate(r.getDate()+1)){let i=r.getFullYear(),S=String(r.getMonth()+1).padStart(2,"0"),w=String(r.getDate()).padStart(2,"0");l.push(`${i}-${S}-${w}`)}let o=[...l],d=Math.floor(Math.random()*(l.length/2));for(let r=0;r<d;r++){let i=Math.floor(Math.random()*o.length);o.splice(i,1)}return o},changeAvailableDates(){this.availables.length>0?this.setAvailables([]):this.setAvailables(this.createRandomAvailableDates()),this.clearSelection()},getToday(){let e=new Date,t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");return{year:t,month:a,date:s}},clearSelection(){this.selectedEntry=null,this.selectedDate=null,this.selectedDates=[]},setSelectMode(e){this.selectMode=e},setAvailables(e){this.availables=e},getAvailable(e){if(!this.availables||this.availables.length===0)return!0;let t=e.year,a=(e.month+1).toString().padStart(2,"0"),s=e.date.toString().padStart(2,"0"),n=`${t}-${a}-${s}`;return this.availables.includes(n)},getCalendarDataObject(){return Alpine.$data(this.$root.querySelector("table"))},jumpToYear(e){this.getCalendarDataObject().gotoYear(e)},jumpToYearCurrentMonth(e){this.getCalendarDataObject().gotoYear(e,this.getCalendarDataObject().month)},resetCalendar(){this.getCalendarDataObject().gotoToday()},isSelected(e){let t=!1;switch(this.selectMode){case"single":t=this.selectedEntry?.id===e.id;break;case"multiple":let a=u(e);if(this.selectedDates.length===1)t=this.selectedDates.includes(a);else if(this.selectedDates.length===2){let s=this.selectedDates[0],n=this.selectedDates[1];for(let l=new Date(s);l<=new Date(n);l.setDate(l.getDate()+1)){let o=m(l.getFullYear(),l.getMonth(),l.getDate());if(a===o){t=!0;break}}}break}return t},selectEntry(e=null){switch(this.selectMode){case"single":if(e&&this.selectedEntry&&this.selectedEntry.id===e.id){this.selectedEntry=null;return}this.selectedEntry=e,this.selectedDate=null,this.selectedEntry&&(this.selectedDate=u(this.selectedEntry));break;case"multiple":if(e===null){this.selectedDates=[];return}let t,a,s=u(e);if(this.selectedDates.includes(s)){this.selectedDates=this.selectedDates.filter(n=>n!==s);return}if(this.selectedDates.length===1?(t=new Date(this.selectedDates[0]),new Date(s)<t?this.selectedDates.unshift(s):this.selectedDates.push(s)):this.selectedDates.length===2?(t=new Date(this.selectedDates[0]),new Date(s)<t?this.selectedDates[0]=s:this.selectedDates[1]=s):(this.selectedDates=[],this.selectedDates.push(s)),this.selectedDates.length>1){t=this.selectedDates[0],a=this.selectedDates[1];for(let n=new Date(t);n<=new Date(a);n.setDate(n.getDate()+1)){let l=m(n.getFullYear(),n.getMonth(),n.getDate());if(this.availables.length>0&&!this.availables.includes(l))return this.selectedDates=[],!1}}break}},getSelection(){let e=null;switch(this.selectMode){case"single":e=this.selectedEntry;break;case"multiple":e=this.selectedDates;break}return e}});function D(){return window.Alpine?(window.Alpine.data("calendar_entry",W),window.Alpine.data("calendar_module",L),{mount(e){typeof e=="string"&&(e=document.querySelector(e)),e?e.innerHTML=h:console.error("Cannot find target element.",e)},getTemplate(){return h}}):(console.error("Alpine.js is not loaded. Please load Alpine.js first."),null)}typeof document<"u"&&document.addEventListener("DOMContentLoaded",()=>{window.Alpine&&document.querySelectorAll("[data-calendar-mount]").forEach(e=>{let t=D();t&&t.mount(e)})});window.CalendarComponent={registerCalendar:D};return T(H);})();
