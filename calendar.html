<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendar</title>

    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>

    <link rel="stylesheet" type="text/css" href="calendar.css" />
    <script type="text/javascript" src="calendar.js"></script>
</head>

<body>
    <h1>Alpine.js Calendar Component</h1>

    <div x-data="calendar_module" id="calendar-container">
        <template x-if="!selectedEntry">
            <p>Please select date.</p>
        </template>

        <template x-if="selectedEntry">
            <p>
                Selected date:
                <strong>
                    <span x-text="selectedEntry.monthName"></span>
                    <span x-text="selectedEntry.date"></span>,
                    <span x-text="selectedEntry.year"></span>
                </strong>
                <template x-if="selectedEntry.isToday">
                    <span>( that's today! )</span>
                </template>
                <button @click="selectEntry(null)">Clear</button>
            </p>
        </template>

        <p class="jumper">
            <strong>Jump to:</strong>
            <button @click="resetCalendar">Today</button>
            <button @click="jumpToYear( 2023 )">2023</button>
            <button @click="jumpToYear( 2024 )">2024</button>
            <button @click="jumpToYear( 2025 )">2025</button>
            <button @click="jumpToYear( 2026 )">2026</button>
        </p>

        <!-- Calendar Begin -->
        <table x-data="calendar_entry" class="calendar">
            <thead>
                <tr>
                    <th colspan="7">
                        <div class="tools">
                            <!-- Previous month -->
                            <button @click="gotoPrevMonth()">&larr;</button>

                            <span x-text="monthName"></span>
                            <span x-text="year"></span>

                            <!-- Next month -->
                            <button @click="gotoNextMonth()">&rarr;</button>
                        </div>
                    </th>
                </tr>
                <tr>
                    <template x-for="header in grid.headersAbbreviated" :key="header">
                        <th scope="col" x-text="header">
                        </th>
                    </template>
                </tr>
            </thead>

            <tbody>
                <template x-for="(week, i) in grid.weeks" :key="i">
                    <tr>
                        <template x-for="entry in week" :key="entry.id">
                            <td>
                                <button @click="selectEntry(entry)" :class="{
                                    current: entry.isCurrentMonth,
                                    other: entry.isOtherMonth,
                                    today: entry.isToday,
                                    weekday: entry.isWeekday,
                                    saturday: entry.isSaturday,
                                    sunday: entry.isSunday,
                                    selected: (selectedEntry?.id == entry.id)
                                }" :disabled="!getAvailable(entry)" x-text="entry.date">
                                    <!-- }" x-text="entry.date"> -->
                                </button>
                            </td>
                        </template>
                    </tr>
                </template>
            </tbody>
        </table>
        <!-- Calendar End -->

    </div>
</body>

<script>
    let availableDates = [
        "2024-07-05", "2024-07-06", "2024-07-07", "2024-07-08", "2024-07-09", "2024-07-10",
        "2024-07-11", "2024-07-12", "2024-07-13", "2024-07-14", "2024-07-15", "2024-07-16",
        "2024-07-17", "2024-07-18", "2024-07-19", "2024-07-20", "2024-07-21", "2024-07-22",
    ]

    document.addEventListener('alpine:initialized', () => {
        Alpine.$data(document.querySelector("#calendar-container")).setAvailables(availableDates)
    })
</script>

</html>